N,M = map(int, input().split())
board = [list(map(int, input().split())) for _ in range(N)]

shapes = [
    ## '-', '|'
    [(0,0),(0,1),(0,2),(0,3)], ## '-'
    [(0,0),(1,0),(2,0),(3,0)], ## '|'

    ## 'ㅁ'
    [(0,0),(0,1),(1,0),(1,1)],

    ## 'L'
    [(0,0), (1,0), (2,0), (2,1)], ## L
    [(0,0), (0,1), (1,0), (2,0)],
    ##  ..
    ##  .
    ##  .

    [(0,0), (0,1), (0,2), (1,2)], 
    ## ...
    ##   .

    [(0,0), (0,1), (0,2), (1,0)], 
    ## ...
    ## .

    [(0,0), (0,1), (1,1), (2,1)],
    ## ..
    ##  .
    ##  .

    [(0,1), (1,1), (2,0), (2,1)],
    ##  .
    ##  .
    ## ..

    [(0,0), (1,0), (1,1), (1,2)],
    ## .
    ## ...

    [(0,2), (1,0), (1,1), (1,2)],
    ##   .
    ## ...


    # Z 모양 (4가지)
    [(0,0), (1,0), (1,1), (2,1)],
    ## .
    ## ..
    ##  .

    [(0,1), (1,0), (1,1), (2,0)],
    ##  .
    ## ..
    ## .
    
    [(0,0), (0,1), (1,1), (1,2)],
    ## ..
    ##  ..

    [(0,1), (0,2), (1,0), (1,1)],
    ##  ..
    ## ..


    # T 모양 (4가지)
    [(0,0), (0,1), (0,2), (1,1)],
    ## ...
    ##  .

    [(0,1), (1,0), (1,1), (1,2)],
    ##  .
    ## ...

    [(0,0), (1,0), (2,0), (1,1)],
    ## .
    ## ..
    ## .
    
    [(0,1), (1,0), (1,1), (2,1)]
    ##  .
    ## ..
    ##  .
]

max_sum = 0

for i in range(N):
    for j in range(M):
        for shape in shapes:
            curr_total = 0
            valid = True

            for dx,dy in shape:
                nx, ny = i+dx, j+dy
                if 0 <= nx < N and 0 <= ny < M:
                    curr_total += board[nx][ny]
                else:
                    valid = False
                    break
            
            if valid:
                max_sum = max(max_sum, curr_total)

print(max_sum)