# 신규 아이디 추천

## 문제 설명
[문제 링크](https://school.programmers.co.kr/learn/courses/30/lessons/72410)

카카오 아이디 규칙에 맞게 입력된 아이디(`new_id`)를 변환합니다.
규칙은 총 7단계입니다:
1. 소문자로 치환.
2. 소문자, 숫자, `-`, `_`, `.` 제외한 문자 제거.
3. `.`가 2번 이상 연속되면 하나로(`..` -> `.`).
4. `.`가 처음이나 끝에 있으면 제거.
5. 빈 문자열이면 `"a"` 대입.
6. 16자 이상이면 앞 15자만 남김. 끝 `.` 제거.
7. 2자 이하면 마지막 문자를 길이가 3이 될 때까지 반복해서 붙임.

## 해결 전략
단계별로 문자열 처리 로직을 구현합니다. 정규표현식(`re`)을 쓰면 매우 편합니다.

### 알고리즘 순서
1. `s = new_id.lower()`
2. `s = re.sub(r'[^a-z0-9\-_.]', '', s)` (허용된 문자 외 제거)
3. `s = re.sub(r'\.+', '.', s)` (연속된 점 축소)
4. `s = s.strip('.')` (양 끝 점 제거)
5. `if not s: s = "a"`
6. `s = s[:15].rstrip('.')` (길이 제한 후 끝 점 제거)
7. `while len(s) < 3: s += s[-1]`

## Python 코드

```python
import re

def solution(new_id):
    # 1단계
    s = new_id.lower()
    
    # 2단계: 소문자, 숫자, -, _, . 제외 제거
    s = re.sub(r'[^a-z0-9\-_.]', '', s)
    
    # 3단계: 마침표 2번 이상 -> 하나로
    s = re.sub(r'\.+', '.', s)
    
    # 4단계: 처음/끝 마침표 제거
    s = s.strip('.')
    
    # 5단계: 빈 문자열이면 "a"
    if not s:
        s = "a"
        
    # 6단계: 16자 이상이면 15자, 끝 마침표 제거
    if len(s) >= 16:
        s = s[:15]
        s = s.rstrip('.')
        
    # 7단계: 2자 이하면 마지막 문자 반복
    while len(s) < 3:
        s += s[-1]
        
    return s
```

## 배운 점 / 팁
- **정규표현식(Regex)**: 복잡한 문자열 필터링 및 치환 규칙(`[^...]`, `\.+` 등)을 한 줄로 처리할 수 있는 강력한 도구입니다.
- **체이닝 메소드**: `lower().strip()` 등 파이썬 문자열 메소드를 적극 활용하면 로직이 깔끔해집니다.
